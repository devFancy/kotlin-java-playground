# 도메인 주도 개발 시작하기

이 글은 [도메인 주도 개발 시작하기: DDD 핵심 개념 정리부터 구현까지](https://product.kyobobook.co.kr/detail/S000001810495) 책을 읽고 정리한 내용이다. 

아래 내용은 책에서 중요한/기억하고자하는 내용 위주로 정리했다. 자세한 내용은 책을 참고하자.


---

# 1장. 도메인 모델 시작하기

## 1.3 도메인 모델

- 도메인 모델은 특정 도메인을 개념적으로 표현한 것이다.
- 도메인을 이해하려면 도메인이 제공하는 기능과 도메인의 주요 데이터 구성을 파악해야 한다.
- 도메인 모델을 표현할 때, 클래스 다이어그램이나 상태 다이어그램과 같은 UML 표기법 외에도 관계가 중요한 도메인이라면 그래프를 이용해서 도메인을 모델링할 수 있다(p.28) 중요한 점은 도메인을 이해하는데 도움이 되는 어떤 표현 방식이든 상관없다.
- 도메인은 다수의 하위 도메인으로 구성된다.
    - 각 하위 도메인이 다루는 영역은 서로 다르기 때문에, 같은 용어라도 하위 도메인마다 다를 수 있다.
        - 예를 들어, 상품 가격 ↔ 주문 가격 처럼 ‘가격’이라는 용어는 같지만 하위 도메인에서의 가격은 요구사항과 정책에 따라 다르다.
    - 모델의 각 구성요소는 특정 도메인으로 한정될 때 비로소 의미가 완전해진다. 그래서 각 하위 도메인마다 별도로 모델을 만들어야 한다.

## 1.6 엔티티와 밸류

> 엔티티

- 식별자를 가진다. e.g. 주문의 식별자는 주문번호
- 식별자는 바뀌지 않는다.

![](/book/Starting-with-Domain-Driven-Design/img/Starting-with-Domain-Driven-Design-1-1.png)


> 식별자 생성

- 주의할 점은 같은 시간에 동시에 식별자를 생성해도 같은 식별자가 만들어지면 안된다.
- 그래서 UUID를 사용해서 식별자를 생성한다.


> 밸류 타입

- 밸류 타입은 개념적으로 완전한 하나를 표현할 때 사용한다.
- 밸류 타입이 반드시 2개 이상의 데이터를 가져야 하는 것은 아니다.
- 밸류 타입의 장점은 밸류 타입을 위한 기능을 추가할 수 있다.
    - 예를 들어, Money 타입은 아래와 같이 돈 계산을 위한 기능을 추가할 수 있다.
    - Money를 사용하는 코드는 이제 ‘정수 타입 연산’이 아니라 ‘돈 계산’이라는 의미로 코드를 작성할 수 있다.

![](/book/Starting-with-Domain-Driven-Design/img/Starting-with-Domain-Driven-Design-1-2.png)

- 밸류 객체의 데이터를 변경할 때는 변경한 데이터를 갖는 새로운 밸로 객체를 생성하는 방식을 선호한다.

![](/book/Starting-with-Domain-Driven-Design/img/Starting-with-Domain-Driven-Design-1-3.png)

### 도메인 모델에 set 메서드 넣지 않기

- set은 도메인의 핵심 개념이나 의도를 코드에서 사라지게 한다.
    - → 결제완료했을 때 주문 상태를 변경한다(complePayment())는 메서드가 존재하는데, set이 같이 존재하게 되면 해당 메서드에 대해 도메인 지식이 사라지게 된다.
- set 메서드의 또 다른 문제는 도메인 객체를 생성할 때 온전하지 않는 상태가 될 수 있다.
    - → 불완전한 객체로 사용되는 것을 막으려면 생성 시점에 필요한 것을 전달해줘야 한다. 즉 생성자를 통해 필요한 데이터를 모두 받아야 한다.

## 1.7 도메인 용어와 유비쿼터스 언어

- 유비쿼터스 언어 - 전문가, 관계자, 개발자가 도메인과 관련된 공통의 언어를 만들고 이를 대화, 문서, 도메인 모델, 코드, 테스트 등 모든 곳에서 같은 용어를 사용한다는 의미이다.
